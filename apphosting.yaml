kind: "AppStack"
schemaVersion: "v1"
build:
  env:
    # DATABASE_URL is now fetched from Secret Manager to avoid parsing issues.
    - variable: DATABASE_URL
      secret: DATABASE_URL_SECRET
run:
  env:
    # DATABASE_URL is also fetched from Secret Manager for runtime.
    - variable: DATABASE_URL
      secret: DATABASE_URL_SECRET
    - variable: NEXTAUTH_SECRET
      secret: NEXTAUTH_SECRET
    - variable: GOOGLE_CLIENT_ID
      secret: GOOGLE_CLIENT_ID
    - variable: GOOGLE_CLIENT_SECRET
      secret: GOOGLE_CLIENT_SECRET
    # These variables are standard for NextAuth on App Hosting.
    - variable: NEXTAUTH_URL
      value: "https://manga-support-app02--aozu-c7bf0.us-east4.hosted.app"
    - variable: AUTH_TRUST_HOST
      value: "true"
